# ✅ 배포 체크리스트

AutoTrading_Release 폴더를 배포하기 전에 반드시 확인해야 할 사항들입니다.

---

## 📋 배포 전 필수 체크

### 1️⃣ 보안 체크 (Critical)

- [ ] `.env` 파일이 **포함되지 않았는지** 확인
- [ ] `.env.example` 파일만 포함되었는지 확인
- [ ] `.gitignore`에 민감한 파일들이 등록되어 있는지 확인
  - [ ] `.env`
  - [ ] `*_api_token.json`
  - [ ] `*.dat` (토큰 파일)
  - [ ] `*.log` (로그 파일)
  - [ ] `__pycache__/`
  - [ ] `*.pyc`
- [ ] API 키가 코드에 하드코딩되지 않았는지 확인
- [ ] 실제 계좌번호가 예시 코드에 포함되지 않았는지 확인

---

### 2️⃣ 필수 파일 체크

#### 코어 파일
- [ ] `main.py`
- [ ] `auto_market_scheduler.py`
- [ ] `dual_market_scheduler.py`
- [ ] `config.py`
- [ ] `requirements.txt`

#### 공통 모듈 (common/)
- [ ] `common/__init__.py`
- [ ] `common/base_api.py`
- [ ] `common/base_strategy.py`
- [ ] `common/base_token_manager.py`

#### 한국 주식 모듈 (kr/)
- [ ] `kr/__init__.py`
- [ ] `kr/config.py`
- [ ] `kr/api_client.py`
- [ ] `kr/strategy.py`
- [ ] `kr/token_manager.py`

#### 미국 주식 모듈 (us/)
- [ ] `us/__init__.py`
- [ ] `us/config.py`
- [ ] `us/api_client.py`
- [ ] `us/strategy.py`
- [ ] `us/token_manager.py`

#### 유틸리티
- [ ] `startup_validator.py` ⭐NEW
- [ ] `stop_loss_tracker.py`
- [ ] `transaction_logger.py`
- [ ] `order_manager.py`
- [ ] `currency_utils.py`
- [ ] `kis_api.py`
- [ ] `token_manager.py`

#### 설정 파일
- [ ] `.env.example` (API 키 예시)
- [ ] `kr_stocks_config.json` (한국 종목)
- [ ] `us_stocks_config.json` (미국 종목)
- [ ] `.gitignore`

#### 실행 파일
- [ ] `start_auto.bat` (Windows)
- [ ] `setup.bat` (Windows)

#### 문서 파일
- [ ] `README.md`
- [ ] `RELEASE_NOTES.md`
- [ ] `빠른_시작_가이드.md` ⭐NEW
- [ ] `설정_빠른_참조.md` ⭐NEW
- [ ] `국장_매매_설정_가이드.md` ⭐NEW
- [ ] `배포_체크리스트.md` ⭐NEW (이 파일)
- [ ] `운영_메뉴얼.md` ⭐NEW

---

### 3️⃣ 설정 파일 검증

#### .env.example
- [ ] 모든 필수 환경변수가 포함되어 있는지 확인
  ```env
  KIS_APP_KEY=your_app_key_here
  KIS_APP_SECRET=your_app_secret_here
  KIS_ACCOUNT_NUMBER=12345678-01
  USE_PAPER_TRADING=True
  ```
- [ ] 실제 API 키가 **없는지** 확인 (예시 값만)

#### kr_stocks_config.json
- [ ] JSON 형식이 올바른지 확인
- [ ] 기본 종목이 설정되어 있는지 확인
- [ ] 주석(comment)이 없는지 확인 (JSON은 주석 미지원)

#### us_stocks_config.json
- [ ] JSON 형식이 올바른지 확인
- [ ] 기본 종목이 설정되어 있는지 확인
- [ ] exchange 정보가 올바른지 확인

---

### 4️⃣ 코드 품질 체크

#### Python 버전 호환성
- [ ] Python 3.8 이상 코드 사용
- [ ] f-string 등 최신 문법 사용 여부 확인

#### Import 확인
- [ ] 모든 모듈 import가 정상적인지 확인
- [ ] 순환 import가 없는지 확인

#### 오류 처리
- [ ] try-except 블록이 적절히 사용되었는지 확인
- [ ] 로그 레벨이 적절한지 확인 (DEBUG, INFO, WARNING, ERROR)

---

### 5️⃣ 기능 테스트

#### 시작 전 검증
- [ ] `startup_validator.py` 단독 실행 테스트
  ```bash
  python startup_validator.py
  ```
- [ ] 종목 검증이 정상 작동하는지 확인
- [ ] 오류 종목 발견 시 경고 메시지 출력 확인

#### 미국 주식 단독 실행
- [ ] `python main.py` 실행 테스트
- [ ] 토큰 발급 정상 확인
- [ ] 설정 검증 화면 정상 출력 확인

#### 한국 주식 단독 실행
- [ ] `python main.py --market kr` 실행 테스트
- [ ] 토큰 발급 정상 확인
- [ ] 설정 검증 화면 정상 출력 확인

#### 듀얼 마켓 실행
- [ ] `python main.py --market both` 실행 테스트
- [ ] 양쪽 시장 토큰 발급 확인

#### 자동 시장 전환
- [ ] `start_auto.bat` 실행 테스트
- [ ] 시장 자동 감지 확인
- [ ] 설정 검증 화면 정상 출력 확인

---

### 6️⃣ 문서 검증

#### README.md
- [ ] 모든 섹션이 완성되어 있는지 확인
- [ ] 링크가 깨지지 않았는지 확인
- [ ] 스크린샷/예시가 최신 버전인지 확인
- [ ] 버전 번호가 올바른지 확인

#### 가이드 문서들
- [ ] `빠른_시작_가이드.md` 내용 검증
- [ ] `설정_빠른_참조.md` 설정값 최신화
- [ ] `국장_매매_설정_가이드.md` 예시 정확성
- [ ] `운영_메뉴얼.md` 완전성

#### RELEASE_NOTES.md
- [ ] 최신 변경사항 반영
- [ ] 버전 번호 업데이트
- [ ] 날짜 업데이트

---

### 7️⃣ 의존성 체크

#### requirements.txt
- [ ] 모든 필수 패키지가 포함되어 있는지 확인
  - [ ] `requests`
  - [ ] `python-dotenv`
  - [ ] `schedule`
  - [ ] `pytz`
  - [ ] `mojito2`
- [ ] 버전 고정이 필요한 패키지 확인
- [ ] 테스트로 설치 확인
  ```bash
  pip install -r requirements.txt
  ```

---

### 8️⃣ 로그 및 데이터 파일 제거

- [ ] `trading.log` 삭제
- [ ] `transaction_logs/*.csv` 모두 삭제
- [ ] `*_api_token.json` 모두 삭제
- [ ] `*.dat` 토큰 파일 모두 삭제
- [ ] `__pycache__/` 폴더 모두 삭제
- [ ] `*.pyc` 파일 모두 삭제
- [ ] `kr_stop_loss_blacklist.json` 삭제 (또는 빈 파일)
- [ ] `us_stop_loss_blacklist.json` 삭제 (또는 빈 파일)

---

### 9️⃣ Windows 호환성 (선택)

- [ ] 배치 파일 실행 테스트
  - [ ] `setup.bat`
  - [ ] `start_auto.bat`
- [ ] 한글 파일명 인코딩 문제 없는지 확인
- [ ] 경로 구분자 (`/` vs `\`) 호환성 확인

---

### 🔟 최종 점검

- [ ] 전체 폴더 크기 확인 (불필요한 대용량 파일 없는지)
- [ ] 압축 파일 생성 테스트
- [ ] 압축 해제 후 실행 테스트 (다른 PC에서)
- [ ] 모의투자 모드로 30분 실행 테스트
- [ ] 로그 파일 정상 생성 확인
- [ ] 오류 없이 종료되는지 확인 (Ctrl+C)

---

## 🚀 배포 준비 완료 체크

모든 항목을 체크한 후:

- [ ] 버전 태그 생성 (git tag)
  ```bash
  git tag -a v4.7 -m "Release v4.7 - 장 시작 전 설정 검증 추가"
  git push origin v4.7
  ```
- [ ] GitHub Release 생성
- [ ] 배포 파일 압축
  ```bash
  # AutoTrading_Release_v4.7.zip
  ```
- [ ] 배포 노트 작성

---

## 📦 배포 파일 구조 예시

```
AutoTrading_Release/
├── common/
│   ├── __init__.py
│   ├── base_api.py
│   ├── base_strategy.py
│   └── base_token_manager.py
├── kr/
│   ├── __init__.py
│   ├── config.py
│   ├── api_client.py
│   ├── strategy.py
│   └── token_manager.py
├── us/
│   ├── __init__.py
│   ├── config.py
│   ├── api_client.py
│   ├── strategy.py
│   └── token_manager.py
├── transaction_logs/  (빈 폴더 또는 .gitkeep)
├── main.py
├── auto_market_scheduler.py
├── dual_market_scheduler.py
├── startup_validator.py  ⭐NEW
├── stop_loss_tracker.py
├── transaction_logger.py
├── order_manager.py
├── currency_utils.py
├── kis_api.py
├── token_manager.py
├── config.py
├── requirements.txt
├── .env.example
├── .gitignore
├── kr_stocks_config.json
├── us_stocks_config.json
├── start_auto.bat
├── setup.bat
├── README.md
├── RELEASE_NOTES.md
├── 빠른_시작_가이드.md  ⭐NEW
├── 설정_빠른_참조.md  ⭐NEW
├── 국장_매매_설정_가이드.md  ⭐NEW
├── 배포_체크리스트.md  ⭐NEW
└── 운영_메뉴얼.md  ⭐NEW
```

---

## ⚠️ 배포 금지 항목

절대 배포하면 안 되는 파일들:

❌ `.env` (실제 API 키 포함)
❌ `*_api_token.json` (토큰 파일)
❌ `*.dat` (토큰 발급 시간 기록)
❌ `trading.log` (실제 거래 로그)
❌ `transaction_logs/*.csv` (거래 내역)
❌ `*_stop_loss_blacklist.json` (실제 블랙리스트)
❌ `venv/` 또는 `env/` (가상 환경)
❌ `.idea/` 또는 `.vscode/` (IDE 설정)
❌ `__pycache__/` (Python 캐시)

---

## 🎯 배포 후 확인

배포 후 사용자 테스트:

1. [ ] 신규 사용자가 5분 안에 시작 가능한지 확인
2. [ ] 문서만으로 설정 변경 가능한지 확인
3. [ ] 오류 발생 시 로그로 원인 파악 가능한지 확인

---

## 📞 긴급 롤백 계획

문제 발생 시:

1. **즉시 공지**: 사용자에게 버그 알림
2. **이전 버전 링크 제공**: v4.6 다운로드 링크
3. **수정 버전 배포**: v4.7.1 hotfix

---

**버전**: v4.7
**최종 업데이트**: 2026-01-31
**체크리스트 항목**: 100+
